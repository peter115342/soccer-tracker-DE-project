<script>
	import { Alert, AlertDescription } from '$lib/components/ui/alert';
	import { Badge } from '$lib/components/ui/badge';
	import { Card, CardContent } from '$lib/components/ui/card';
	import { Separator } from '$lib/components/ui/separator';
</script>

<svelte:head>
	<title>About | Football Statistics Tracker</title>
	<meta name="description" content="About the Football Statistics Tracker project" />
</svelte:head>

<div class="container mx-auto max-w-4xl px-4 py-10">
	<div class="mb-8 flex justify-center">
		<img src="/images/soccerDE_logo.png" width="225" alt="Football Statistics Tracker Logo" />
	</div>

	<Alert class="mb-8 border-amber-200 bg-amber-50">
		<AlertDescription>
			<span class="font-bold">âš ï¸ LEARNING PROJECT:</span> This is a personal learning project in the
			field of data engineering. I understand the architecture might not be the most optimal as this
			project. I made this to practise and learn. Feedback and suggestions are highly welcomed!
		</AlertDescription>
	</Alert>

	<h1 class="mb-4 text-4xl font-bold">Football Statistics Tracker ğŸ“Šâš½</h1>

	<div class="mb-8 flex flex-wrap gap-2">
		<Badge variant="outline" class="bg-green-100">Python 3.12</Badge>
		<Badge variant="outline" class="bg-blue-100">GCP Powered</Badge>
		<Badge variant="outline" class="bg-purple-100">IaC Terraform</Badge>
		<Badge variant="outline" class="bg-green-100">CI/CD passing</Badge>
		<Badge variant="outline" class="bg-orange-100">Svelte</Badge>
		<Badge variant="outline" class="bg-blue-100">BigQuery</Badge>
		<Badge variant="outline" class="bg-yellow-100">Firestore</Badge>
		<Badge variant="outline" class="bg-gray-100">Repo Size</Badge>
	</div>

	<p class="mb-6">
		An end-to-end data engineering pipeline that collects, processes, and analyzes football match
		results, standings data, weather data, Reddit data and summarizes matchdays using Gemini from
		the top 5 European leagues. Used data sources include <a
			href="https://www.football-data.org/"
			class="text-blue-600 hover:underline">football-data.org</a
		>
		API,
		<a href="https://open-meteo.com/" class="text-blue-600 hover:underline">Open-Meteo</a> API, and
		<a href="https://praw.readthedocs.io/en/stable/" class="text-blue-600 hover:underline">PRAW</a>
		(Reddit API),
		<a href="https://developers.google.com/maps" class="text-blue-600 hover:underline">Maps</a>...
	</p>

	<Separator class="my-6" />

	<h2 class="mb-4 text-2xl font-bold">Introduction</h2>
	<p class="mb-6">
		This project demonstrates a complete data pipeline for football (soccer) results, from data
		extraction to visualization. It implements some data engineering practices including data lakes,
		transformation layers, and Infrastructure as Code (IaC) with Terraform.
	</p>

	<h2 class="mb-4 text-2xl font-bold">Features</h2>
	<ul class="mb-6 list-disc space-y-2 pl-6">
		<li>
			<span class="font-semibold">Automated Data Collection:</span> Scheduled data fetching from multiple
			APIs using Google Cloud Functions
		</li>
		<li>
			<span class="font-semibold">Multi-layer Data Architecture:</span> Raw data stored in GCS, processed
			data in BigQuery, and user-facing data in Firestore
		</li>
		<li>
			<span class="font-semibold">Weather Integration:</span> Match statistics with weather data at match
			time
		</li>
		<li>
			<span class="font-semibold">Social Media (Reddit) Data:</span> Reddit comments for fan sentiment
		</li>
		<li>
			<span class="font-semibold">Infrastructure as Code:</span> Cloud Functions and Pub/Sub subscriptions
			and topics defined and deployed with Terraform
		</li>
	</ul>

	<h2 class="mb-4 text-2xl font-bold">Architecture</h2>
	<Card class="mb-6">
		<CardContent class="p-4">
			<img src="/images/architecture.png" alt="Architecture Diagram" class="w-full" />
		</CardContent>
	</Card>

	<p class="mb-4">The pipeline follows the following architecture:</p>
	<ol class="mb-6 list-decimal space-y-2 pl-6">
		<li>
			<span class="font-semibold">Data Ingestion:</span> Cloud Functions trigger on schedule to fetch
			data
		</li>
		<li>
			<span class="font-semibold">Storage Layers:</span> Raw data(json) â†’ External BQ tables (Parquet)
			â†’ Processed Data in BQ â†’ Firestore
		</li>
		<li>
			<span class="font-semibold">Validation:</span> Very simple validation and Data quality with Dataplex
		</li>
		<li>
			<span class="font-semibold">Summarization:</span> Creation of short summaries in Markdown with
			Gemini 2.0 Flash
		</li>
		<li>
			<span class="font-semibold">Visualization:</span>
			<a href="https://dataeurotop5football.win/" class="text-blue-600 hover:underline">Web app</a> for
			insights
		</li>
	</ol>

	<h2 class="mb-4 text-2xl font-bold">Data Sources</h2>
	<ul class="mb-6 list-disc space-y-2 pl-6">
		<li>
			<span class="font-semibold">Football-data.org:</span> Match data, team data, and standings
		</li>
		<li><span class="font-semibold">Open-Meteo API:</span> Historical weather data</li>
		<li><span class="font-semibold">Reddit (via PRAW):</span> Fan comments and sentiment</li>
		<li><span class="font-semibold">Maps SDK:</span> Location of stadiums</li>
	</ul>

	<h2 class="mb-4 text-2xl font-bold">Technology Stack</h2>
	<div class="mb-6 overflow-x-auto">
		<table class="w-full border-collapse">
			<thead>
				<tr class="border-b">
					<th class="px-4 py-2 text-left">Category</th>
					<th class="px-4 py-2 text-left">Technologies</th>
				</tr>
			</thead>
			<tbody>
				<tr class="border-b">
					<td class="px-4 py-2">Cloud Platform</td>
					<td class="px-4 py-2">Google Cloud Platform (GCP)</td>
				</tr>
				<tr class="border-b">
					<td class="px-4 py-2">Infrastructure as Code</td>
					<td class="px-4 py-2">Terraform</td>
				</tr>
				<tr class="border-b">
					<td class="px-4 py-2">Programming Languages</td>
					<td class="px-4 py-2">Python, TypeScript (Svelte)</td>
				</tr>
				<tr class="border-b">
					<td class="px-4 py-2">Data Storage</td>
					<td class="px-4 py-2">Cloud Storage, BigQuery, Firestore</td>
				</tr>
				<tr class="border-b">
					<td class="px-4 py-2">Data Quality</td>
					<td class="px-4 py-2">Dataplex</td>
				</tr>
				<tr class="border-b">
					<td class="px-4 py-2">Data Transformation</td>
					<td class="px-4 py-2">Dataform</td>
				</tr>
				<tr class="border-b">
					<td class="px-4 py-2">Serverless Computing</td>
					<td class="px-4 py-2">Cloud Functions</td>
				</tr>
				<tr class="border-b">
					<td class="px-4 py-2">Event-Driven Architecture</td>
					<td class="px-4 py-2">Pub/Sub</td>
				</tr>
				<tr class="border-b">
					<td class="px-4 py-2">API Consumption</td>
					<td class="px-4 py-2">Football-data.org, Open-Meteo, Reddit API, Google Maps</td>
				</tr>
				<tr class="border-b">
					<td class="px-4 py-2">CI/CD</td>
					<td class="px-4 py-2">GitHub Actions</td>
				</tr>
				<tr class="border-b">
					<td class="px-4 py-2">Package Management</td>
					<td class="px-4 py-2">uv, pyproject.toml</td>
				</tr>
				<tr class="border-b">
					<td class="px-4 py-2">Code Quality</td>
					<td class="px-4 py-2">Ruff, Bandit, Mypy</td>
				</tr>
				<tr class="border-b">
					<td class="px-4 py-2">Testing</td>
					<td class="px-4 py-2">pytest</td>
				</tr>
				<tr class="border-b">
					<td class="px-4 py-2">Web Framework</td>
					<td class="px-4 py-2">Svelte, ShadCN UI Components</td>
				</tr>
				<tr class="border-b">
					<td class="px-4 py-2">Hosting</td>
					<td class="px-4 py-2">Firebase App Hosting</td>
				</tr>
				<tr class="border-b">
					<td class="px-4 py-2">LLM</td>
					<td class="px-4 py-2">Google Gemini 2.0 Flash</td>
				</tr>
			</tbody>
		</table>
	</div>

	<h2 class="mb-4 text-2xl font-bold">Project Structure</h2>
	<Card class="mb-6">
		<CardContent class="p-4">
			<pre class="overflow-x-auto whitespace-pre-wrap text-sm">
soccer-tracker-DE-project/
â”œâ”€â”€ README.md
â”œâ”€â”€ .gitignore
â”œâ”€â”€ pyproject.toml
â”œâ”€â”€ Github/workflows/                  # CI/CD in Github Actions
â”‚   â”œâ”€â”€ cd.yml
â”‚   â””â”€â”€ ci.yml
â”œâ”€â”€ terraform/                         # IaC definitions
â”‚   â”œâ”€â”€ main.tf
â”‚   â”œâ”€â”€ variables.tf
â”‚   â”œâ”€â”€ pubsub.tf
â”‚   â””â”€â”€ cloud_functions.tf
â”œâ”€â”€ cloud_functions/
â”‚   â”œâ”€â”€ league_data/                   # League and Teams data extraction and load
â”‚   â”œâ”€â”€ discord_utils/                 # Package for sending Discord notifications using webhooks
â”‚   â”œâ”€â”€ match_data/                    # Match data extraction and load
â”‚   â”œâ”€â”€ weather_data/                  # Weather data extraction and load
â”‚   â”œâ”€â”€ reddit_data/                   # Reddit data extraction and load
â”‚   â”œâ”€â”€ standings_data/                # Standings data extraction and load for each matchday
â”‚   â”œâ”€â”€ data_validation/               # Data validation using Dataplex
â”‚   â”œâ”€â”€ serving_layer/                 # Load data to firestore
â”‚   â””â”€â”€ generate_summaries/            # Generate match summaries with Gemini
â”œâ”€â”€ soccer_tracker_ui/                 # Svelte web app in Firebase
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ lib/                       # Reusable components
â”‚   â”‚   â”‚   â”œâ”€â”€ components/            # UI components from [shadcn](https://next.shadcn-svelte.com/)
â”‚   â”‚   â”‚   â”œâ”€â”€ firebase.ts            # Firebase/Firestore connection
â”‚   â”‚   â”‚   â””â”€â”€ stores/                # Svelte stores for state management
â”‚   â”‚   â”œâ”€â”€ routes/                    # Page components
â”‚   â”œâ”€â”€ package.json                   # Dependencies and scripts
â”‚   â”œâ”€â”€ svelte.config.js               # Svelte configuration
â”‚   â”œâ”€â”€ vite.config.js                 # Vite bundler config
â””â”€â”€ tests/                             # Test suite for Cloud Functions with Pytest
      </pre>
		</CardContent>
	</Card>

	<Alert class="mb-8 border-amber-200 bg-amber-50">
		<AlertDescription>
			<span class="font-bold">âš ï¸ DISCLAIMER:</span> I know this data probably does not have much real
			value as it is not real-time and the statistics are not that deep ( I wanted to stay within free
			tiers of APIs).
		</AlertDescription>
	</Alert>

	<Separator class="my-6" />

	<p class="mb-8 text-sm text-gray-600">
		I got the idea to make this project from this
		<a
			href="https://github.com/digitalghost-dev/premier-league"
			class="text-blue-600 hover:underline">repo</a
		>
		by
		<a href="https://github.com/digitalghost-dev" class="text-blue-600 hover:underline"
			>digitalghost-dev</a
		>
	</p>
</div>
